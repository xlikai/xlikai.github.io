/* ================================================================
   1. 基础全局设置 (背景色统一与修复)
   ================================================================ */
:root {
    /* 浅色模式保持你喜欢的设置 */
    --theme: #f5f5f5;         /* 网页大背景 */
    --card-bg: #fafafa;       /* 矩形框背景 */
    --primary: #1d1e20;       /* 主文字 */
    --secondary: #57606a;     /* 次文字 */
    --border: #d0d7de;
    --search-bg: #f2f2eb;     
    --hover-bg: #f0f0f0;      /* 白天悬停：比 #fafafa 稍深一点 */
    --tertiary: #0066cc;
    --img-bg: #fafafa; /* 白天保持浅色 */
}

/* 选择器能在你的网页触发夜晚颜色 */
html[data-theme='dark'] {
    --theme: #0d1117;           /* 大背景 */
    --entry: #161b22;           /* 卡片背景 */
    --card-bg: #161b22;         
    --primary: #e3e3e3;         
    --secondary: #bababa; 
    --border: #30363d;          
    --search-bg: #010409a6;       
    --hover-bg: #d1d1d1;        /* 夜晚悬停：比卡片背景更深，实现你想要的“加深” */
    --tertiary: #58a6ff;
    --img-bg: #fefefeb7;
}

body, html, .main {
    background-color: var(--theme) !important; /* 全局背景色统一为主题色 */
    transition: background 0.3s ease; /* 背景色切换动画 */
}

/* ================================================================
   2. 首页三栏布局 (仪表盘感：分离与间距)
   ================================================================ */
/* 首页主容器放宽 */
.list .main {
    max-width: 1300px !important;
    margin: 0 auto !important;
    padding: 20px 10px;
}
/* 三栏布局：增加 gap 实现分离感 */
.column-container {
    display: flex !important;
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 35px;      /* 增加盒子之间的间距 */
    width: 100%;
}
/* 左右侧边栏：固定宽度 + 粘性定位 */
.sidebar-left, .sidebar-right {
    width: 280px !important;
    flex-shrink: 0;
    position: sticky;
    top: 20px; /* 距离顶部 20px 处停住 */
    height: fit-content;
    display: flex;
    flex-direction: column;
    gap: 20px; 
    z-index: 10;
}
/* 中间主内容区：增加盒子感 */
.main-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 20px; /* 文章卡片之间的上下间距 */
}

/* 响应式 */
@media screen and (max-width: 1100px) {
    .column-container {flex-direction: column !important;}
    .sidebar-left, .sidebar-right {width: 100% !important;position: static;}
}
/* ================================================================
   3. 矩形框卡片样式 (Separated Boxes)
   ================================================================ */
.card, .post-entry.card {
    background: var(--card-bg) !important;
    color: var(--primary) !important;
    border: 1px solid var(--border) !important;
    border-radius: 16px !important;
    padding: 25px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important;
        transition: 
        background-color 0.3s ease, 
        color 0.3s ease, 
        border-color 0.3s ease, 
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s ease;
}
/* 深色模式矩形背景设置 */
html[data-theme='dark'] .card,
html[data-theme='dark'] .post-entry.card {
    background: var(--entry) !important; /* 深色模式使用 entry 变量 */
    box-shadow: none; /* 如果需要移除阴影，在这里保留 */
}

/* 确保所有文字颜色跟随变量 */
.card h3, .card h4, .card a, .card p, .card li, .stats p, .stats span {
    color: var(--primary) !important;
}
.stats p span, .tag-list a span {
    color: var(--secondary) !important;
}

/* 文章预览卡片特殊处理 */
.post-entry.card { padding: 0 !important; overflow: hidden; }
.post-entry .entry-header, 
.post-entry .entry-content, 
.post-entry .entry-footer {
    padding-left: 25px;
    padding-right: 25px;
}
/* ================================================================
   4. 图片样式模块
   ================================================================ */
/* 1. 统一图片容器设置 */
.entry-cover, 
.post-single .entry-cover {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    background-color: var(--img-bg) !important; /* 使用独立的暖灰色变量 */
    transition: background-color 0.3s ease;    /* 只有背景色参与过渡 */
}

/* 首页预览图高度与边距 */
.entry-cover {
    width: 100%;
    height: 180px !important; /* 适当增加高度 */
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    overflow: hidden !important;
    margin: 0; 
    border-radius: 12px 12px 0 0;
    transition: background-color 0.2s ease-in-out !important; 
}

/* 详情页顶部图高度 */
.post-single .entry-cover {
    width: 100%;
    height: 350px !important; /* 设置一个固定高度防止无限放大 */
    margin-bottom: 25px;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

/* 2. 图片本体显示规则 */
.entry-cover img, 
.post-single .entry-cover img {
    /* 核心修改：不再强制 100%，而是限制最大尺寸 */
    width: auto !important; 
    height: auto !important;
    max-width: 100% !important;
    max-height: 100% !important;
    object-fit: contain !important; /* 绝对保证不裁剪 */
    mix-blend-mode: normal !important;
    filter: brightness(0.9);
}

/* 3. 夜晚模式下的图片滤镜 */
html[data-theme='dark'] .entry-cover img,
html[data-theme='dark'] .post-single .post-content img {
    filter: brightness(0.8) contrast(1.1) !important;
}

/* 4. 详情页正文图片额外处理 */
.post-single .post-content img {
    max-height: 500px !important;
    max-width: 100% !important;
    width: auto !important;
    height: auto !important;
    margin: 20px auto;
    display: block;
    border-radius: 8px;
    object-fit: contain !important;
    padding: 10px;
    background-color: var(--img-bg) !important; /* 正文图片也应用暖灰色底 */
}

/* 5. 交互效果 */
.post-entry.card:hover .entry-cover img {
    transform: scale(1.03);
}
/* ================================================================
    5. 搜索框增强 (让它变明显) 
    =============================================================*/
.home-search {
    margin: 15px auto;
    padding: 0 10px;
    max-width: 600px; /* 限制一下最大宽度，防止太长 */
}

.home-search form {
    background: var(--search-bg) !important; /* 使用专门的搜索框背景 */
    border: 1px solid var(--border) !important;
    height: 40px;
    border-radius: 18px; /* 圆角*/
    padding: 0px 15px;  /* 左右内边距；上下0，配合input的padding控顶部间距 */
    box-sizing: border-box; /* 关键：让边框/内边距包含在height内，不溢出 */
    display: flex; /* 弹性布局，让input和button横向排列，避免错位 */
    align-items: center; /* 垂直居中，解决顶部过近的核心 */
    transition: all 0.3s ease;
    overflow: hidden; /* 确保内部元素不溢出圆角 */
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
}
.home-search input { color: var(--primary) !important; }
.home-search form:focus-within {
    background: var(--card-bg) !important;
    box-shadow: 0 0 0 3px rgba(0, 100, 255, 0.1);
    border-color: var(--tertiary) !important;
}

.home-search input::placeholder {
    color: var(--secondary);
}
.home-search button {
    color: var(--secondary) !important;
}

/* 搜索框聚焦时，边框高亮 */
.home-search form:focus-within {
    background: var(--card-bg) !important; /* 聚焦时稍微亮一点 */
}
/* ================================================================
   6. 其他细节微调
   ================================================================ */
/* 头像圆形 */
.profile-card .avatar {
    width: 120px !important;
    height: 120px !important;
    border-radius: 50% !important;
    border: 4px solid var(--theme);
    margin-bottom: 20px;
}

/* 导航栏对齐 */
.nav {
    max-width: 1300px;
    margin: 0 auto;
}


/* 链接悬停 */
.social-links a {
    position: relative;
    text-decoration: none !important;
}
.social-links a::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: var(--secondary);
    transition: width 0.3s ease;
}
.social-links a:hover::after {
    width: 100%; /* 鼠标移上去，下划线从左向右长出来 */
}

.tag-list li {
    list-style: none;
    margin: 5px 0;
}
/* 分类标签列表悬停 */
.tag-list li a {
    padding: 2px 8px;
    border-radius: 8px;
    transition: all 0.3s ease;
}

/* 归档年份小按钮悬停 */
.year-link {
    padding: 2px 8px;
    border-radius: 8px;
    transition: all 0.3s ease;
    display: inline-flex !important;
    border: 1px solid transparent;
    margin: 0 1px;   /* 加间距，可选 */
}


/* 最新文章列表悬停 */
.recent-card ul li {
    list-style: none;
    margin: 5px 0;
}
.recent-card ul li a {
    display: block;        /* 让整行都可以点击和变色 */
    padding: 2px 8px;    /* 控制变色区域的大小 */
    border-radius: 8px;   /* 圆角矩形 */
    transition: all 0.3s ease;
    border: 1px solid transparent; /* 预留边框位置，防止闪烁 */
}


/* 悬停效果：实现你要求的背景加深逻辑 */
.tag-list li a:hover,
.year-link:hover,
.recent-card ul li a:hover {
    background: var(--hover-bg) !important; 
    transform: translateX(4px);
    color: var(--tertiary) !important;
    border-color: var(--border) !important;
}

/* 文章预览卡片整体悬停 */
.post-entry.card {
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}
.post-entry.card:hover {
    transform: translateY(-5px);           /* 整个卡片上移 */
    border-color: var(--tertiary);         /* 边框变色 */
}

/* ================================================================
   7. 滚动条修复
   ================================================================ */
::-webkit-scrollbar-thumb {
    background: var(--border) !important; /* 强制设为边框灰色，不随蓝色变量变色 */
}
::-webkit-scrollbar-thumb:hover {
    background: var(--secondary) !important;
}