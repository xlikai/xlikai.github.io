<!DOCTYPE html>
<html lang="en" dir=" auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Shellç»ƒä¹ 2-2 | xlikaiçš„åšå®¢</title>
<meta name="keywords" content="Shell, Linux">
<meta name="description" content="åœ¨æ—¥å¸¸çš„ Shell æ“ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æ·±å±‚çº§çš„ç›®å½•ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚The Missing Semester of Your CS Education 2-2 ä½œä¸šè¦æ±‚ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå®ç° marco ä¿å­˜å½“å‰ç›®å½•å’Œ polo è·³è½¬å›ä¿å­˜çš„ç›®å½•ã€‚
è„šæœ¬æºç 
å¯ä»¥ç›´æ¥ä¸‹è½½æˆ–å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° /home/vsat/marco.shï¼š
#!/bin/bash

declare -A MARCO_DIRS
MARCO_DEFAULT=&#34;default&#34;
MARCO_HISTORY_FILE=&#34;$HOME/.marco_history&#34;

# 1. æŒä¹…åŒ–åŠ è½½ï¼šå¯åŠ¨æ—¶è¯»å–å†å²è®°å½•
if [[ -f &#34;$MARCO_HISTORY_FILE&#34; ]]; then
    while IFS=: read -r tag path; do
        # ç®€å•æ ¡éªŒç›®å½•æ˜¯å¦å­˜åœ¨
        if [[ -d &#34;$path&#34; ]]; then
            MARCO_DIRS[&#34;$tag&#34;]=&#34;$path&#34;
        fi
    done &lt; &#34;$MARCO_HISTORY_FILE&#34;
fi

# å†…éƒ¨è¾…åŠ©å‡½æ•°ï¼šä¿å­˜å†å²è®°å½•åˆ°æ–‡ä»¶ï¼ˆé‡å†™æ¨¡å¼ï¼Œå®ç°æ¸…ç†ï¼‰
_marco_save_history() {
    # ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ç©ºçš„ï¼‰
    : &gt; &#34;$MARCO_HISTORY_FILE&#34;
    for tag in &#34;${!MARCO_DIRS[@]}&#34;; do
        echo &#34;$tag:${MARCO_DIRS[$tag]}&#34; &gt;&gt; &#34;$MARCO_HISTORY_FILE&#34;
    done
}

marco(){
	local tag=&#34;${1:-$MARCO_DEFAULT}&#34;
	local current_dir=&#34;$(pwd)&#34;

	MARCO_DIRS[&#34;$tag&#34;]=&#34;$current_dir&#34;

    # è°ƒç”¨ä¼˜åŒ–åçš„ä¿å­˜å‡½æ•°ï¼ˆå»é‡ã€æ¸…ç†ï¼‰
	_marco_save_history
	
	echo &#34;âœ“ Marco[$tag]: å·²ä¿å­˜ â†’ $current_dir&#34;
	echo &#34;  å¯ç”¨æ ‡ç­¾: ${!MARCO_DIRS[@]}&#34;
}

polo() {
    local tag=&#34;${1:-$MARCO_DEFAULT}&#34;  # å¦‚æœæ²¡æœ‰æŒ‡å®šæ ‡ç­¾ï¼Œä½¿ç”¨é»˜è®¤

    if [[ -z &#34;${MARCO_DIRS[$tag]}&#34; ]]; then
        echo &#34;âœ— Polo[$tag]: é”™è¯¯ï¼è¯¥æ ‡ç­¾æœªä¿å­˜ä»»ä½•ç›®å½•&#34;
        echo &#34;   å¯ç”¨çš„æ ‡ç­¾: ${!MARCO_DIRS[@]}&#34;
        return 1
    fi

    local target_dir=&#34;${MARCO_DIRS[$tag]}&#34;

    if [[ ! -d &#34;$target_dir&#34; ]]; then
        echo &#34;âœ— Polo[$tag]: é”™è¯¯ï¼ç›®å½•ä¸å­˜åœ¨: $target_dir&#34;
        # ä»æ•°ç»„ä¸­ç§»é™¤æ— æ•ˆæ¡ç›®å¹¶åŒæ­¥åˆ°æ–‡ä»¶
        unset MARCO_DIRS[&#34;$tag&#34;]
        _marco_save_history
        return 1
    fi

    if cd &#34;$target_dir&#34;; then
        echo &#34;âœ“ Polo[$tag]: å·²è·³è½¬åˆ° â†’ $(pwd)&#34;
    else
        echo &#34;âœ— Polo[$tag]: è·³è½¬å¤±è´¥ï¼æ— æƒé™è®¿é—®&#34;
        return 1
    fi
}

# æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„ç›®å½•
marco_list() {
    if [[ ${#MARCO_DIRS[@]} -eq 0 ]]; then
        echo &#34;ğŸ“Œ è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•ç›®å½•&#34;
        return
    fi

    echo &#34;ğŸ“Œ å·²ä¿å­˜çš„ç›®å½•æ ‡ç­¾:&#34;
    for tag in &#34;${!MARCO_DIRS[@]}&#34;; do
        if [[ &#34;$tag&#34; == &#34;$MARCO_DEFAULT&#34; ]]; then
            echo &#34;  â˜… $tag â†’ ${MARCO_DIRS[$tag]}&#34;
        else
            echo &#34;    $tag â†’ ${MARCO_DIRS[$tag]}&#34;
        fi
    done
}

# æ¸…é™¤æŒ‡å®šæ ‡ç­¾æˆ–æ‰€æœ‰æ ‡ç­¾
marco_clear() {
    local tag=&#34;${1}&#34;

    if [[ -z &#34;$tag&#34; ]]; then
        echo &#34;âš ï¸  ç”¨æ³•é”™è¯¯ï¼šè¯·æŒ‡å®šè¦æ¸…é™¤çš„æ ‡ç­¾ï¼Œæˆ–ä½¿ç”¨ &#39;all&#39; æ¸…é™¤æ‰€æœ‰&#34;
        echo &#34;   ç¤ºä¾‹ï¼š&#34;
        echo &#34;     marco_clear work    # æ¸…é™¤workæ ‡ç­¾&#34;
        echo &#34;     marco_clear all     # æ¸…é™¤æ‰€æœ‰æ ‡ç­¾&#34;
        echo &#34;   å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}&#34;
    	return 1
    fi

    if [[ &#34;$tag&#34; == &#34;all&#34; ]]; then
        # å¢åŠ äºŒæ¬¡ç¡®è®¤ï¼Œè¿›ä¸€æ­¥é˜²æ­¢è¯¯æ“ä½œ
        read -p &#34;âš ï¸  ç¡®è®¤è¦æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•å—ï¼Ÿ(y/N) &#34; confirm
        if [[ &#34;$confirm&#34; =~ ^[Yy]$ ]]; then
            MARCO_DIRS=()
            _marco_save_history
            echo &#34;âœ“ å·²æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•&#34;
        else
            echo &#34;âœ— æ“ä½œå·²å–æ¶ˆ&#34;
        fi
    
    elif [[ -n &#34;${MARCO_DIRS[$tag]}&#34; ]]; then
        unset MARCO_DIRS[&#34;$tag&#34;]
        _marco_save_history
        echo &#34;âœ“ å·²æ¸…é™¤æ ‡ç­¾: $tag&#34;
    else
        echo &#34;âœ— æ ‡ç­¾ä¸å­˜åœ¨: $tag&#34;
	echo &#34; å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}&#34;
    fi
}

# 2. Tab è‡ªåŠ¨è¡¥å…¨
_polo_completion() {
    local cur
    cur=&#34;${COMP_WORDS[COMP_CWORD]}&#34;
    # è·å–æ‰€æœ‰çš„ key
    local tags=&#34;${!MARCO_DIRS[@]}&#34;
    # ç”Ÿæˆè¡¥å…¨åˆ—è¡¨
    COMPREPLY=( $(compgen -W &#34;${tags}&#34; -- ${cur}) )
}

# ç»‘å®šè¡¥å…¨å‡½æ•°
complete -F _polo_completion polo
complete -F _polo_completion marco_clear
ç¼–å†™æ€è·¯ä¸è§£æ
1. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šå…³è”æ•°ç»„
è„šæœ¬æ ¸å¿ƒä¾èµ–äº declare -A MARCO_DIRSï¼Œè¿™æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼ˆAssociative Arrayï¼‰ï¼Œé”®æ˜¯æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œå€¼æ˜¯ç»å¯¹è·¯å¾„ã€‚è¿™æ¯”ç®€å•çš„ä¸¤ä¸ªå˜é‡æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸æˆ‘ä»¬ä¿å­˜å¤šä¸ªä½ç½®ã€‚">
<meta name="author" content="xlikai">
<link rel="canonical" href="http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.95d489425230030b608ac29ff5671e041a19ebed4c497ccbb9a54ab8dd853025.css" integrity="sha256-ldSJQlIwAwtgisKf9WceBBoZ6&#43;1MSXzLuaVKuN2FMCU=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/">
  <meta property="og:site_name" content="xlikaiçš„åšå®¢">
  <meta property="og:title" content="Shellç»ƒä¹ 2-2">
  <meta property="og:description" content="åœ¨æ—¥å¸¸çš„ Shell æ“ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æ·±å±‚çº§çš„ç›®å½•ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚The Missing Semester of Your CS Education 2-2 ä½œä¸šè¦æ±‚ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå®ç° marco ä¿å­˜å½“å‰ç›®å½•å’Œ polo è·³è½¬å›ä¿å­˜çš„ç›®å½•ã€‚
è„šæœ¬æºç  å¯ä»¥ç›´æ¥ä¸‹è½½æˆ–å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° /home/vsat/marco.shï¼š
#!/bin/bash declare -A MARCO_DIRS MARCO_DEFAULT=&#34;default&#34; MARCO_HISTORY_FILE=&#34;$HOME/.marco_history&#34; # 1. æŒä¹…åŒ–åŠ è½½ï¼šå¯åŠ¨æ—¶è¯»å–å†å²è®°å½• if [[ -f &#34;$MARCO_HISTORY_FILE&#34; ]]; then while IFS=: read -r tag path; do # ç®€å•æ ¡éªŒç›®å½•æ˜¯å¦å­˜åœ¨ if [[ -d &#34;$path&#34; ]]; then MARCO_DIRS[&#34;$tag&#34;]=&#34;$path&#34; fi done &lt; &#34;$MARCO_HISTORY_FILE&#34; fi # å†…éƒ¨è¾…åŠ©å‡½æ•°ï¼šä¿å­˜å†å²è®°å½•åˆ°æ–‡ä»¶ï¼ˆé‡å†™æ¨¡å¼ï¼Œå®ç°æ¸…ç†ï¼‰ _marco_save_history() { # ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ç©ºçš„ï¼‰ : &gt; &#34;$MARCO_HISTORY_FILE&#34; for tag in &#34;${!MARCO_DIRS[@]}&#34;; do echo &#34;$tag:${MARCO_DIRS[$tag]}&#34; &gt;&gt; &#34;$MARCO_HISTORY_FILE&#34; done } marco(){ local tag=&#34;${1:-$MARCO_DEFAULT}&#34; local current_dir=&#34;$(pwd)&#34; MARCO_DIRS[&#34;$tag&#34;]=&#34;$current_dir&#34; # è°ƒç”¨ä¼˜åŒ–åçš„ä¿å­˜å‡½æ•°ï¼ˆå»é‡ã€æ¸…ç†ï¼‰ _marco_save_history echo &#34;âœ“ Marco[$tag]: å·²ä¿å­˜ â†’ $current_dir&#34; echo &#34; å¯ç”¨æ ‡ç­¾: ${!MARCO_DIRS[@]}&#34; } polo() { local tag=&#34;${1:-$MARCO_DEFAULT}&#34; # å¦‚æœæ²¡æœ‰æŒ‡å®šæ ‡ç­¾ï¼Œä½¿ç”¨é»˜è®¤ if [[ -z &#34;${MARCO_DIRS[$tag]}&#34; ]]; then echo &#34;âœ— Polo[$tag]: é”™è¯¯ï¼è¯¥æ ‡ç­¾æœªä¿å­˜ä»»ä½•ç›®å½•&#34; echo &#34; å¯ç”¨çš„æ ‡ç­¾: ${!MARCO_DIRS[@]}&#34; return 1 fi local target_dir=&#34;${MARCO_DIRS[$tag]}&#34; if [[ ! -d &#34;$target_dir&#34; ]]; then echo &#34;âœ— Polo[$tag]: é”™è¯¯ï¼ç›®å½•ä¸å­˜åœ¨: $target_dir&#34; # ä»æ•°ç»„ä¸­ç§»é™¤æ— æ•ˆæ¡ç›®å¹¶åŒæ­¥åˆ°æ–‡ä»¶ unset MARCO_DIRS[&#34;$tag&#34;] _marco_save_history return 1 fi if cd &#34;$target_dir&#34;; then echo &#34;âœ“ Polo[$tag]: å·²è·³è½¬åˆ° â†’ $(pwd)&#34; else echo &#34;âœ— Polo[$tag]: è·³è½¬å¤±è´¥ï¼æ— æƒé™è®¿é—®&#34; return 1 fi } # æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„ç›®å½• marco_list() { if [[ ${#MARCO_DIRS[@]} -eq 0 ]]; then echo &#34;ğŸ“Œ è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•ç›®å½•&#34; return fi echo &#34;ğŸ“Œ å·²ä¿å­˜çš„ç›®å½•æ ‡ç­¾:&#34; for tag in &#34;${!MARCO_DIRS[@]}&#34;; do if [[ &#34;$tag&#34; == &#34;$MARCO_DEFAULT&#34; ]]; then echo &#34; â˜… $tag â†’ ${MARCO_DIRS[$tag]}&#34; else echo &#34; $tag â†’ ${MARCO_DIRS[$tag]}&#34; fi done } # æ¸…é™¤æŒ‡å®šæ ‡ç­¾æˆ–æ‰€æœ‰æ ‡ç­¾ marco_clear() { local tag=&#34;${1}&#34; if [[ -z &#34;$tag&#34; ]]; then echo &#34;âš ï¸ ç”¨æ³•é”™è¯¯ï¼šè¯·æŒ‡å®šè¦æ¸…é™¤çš„æ ‡ç­¾ï¼Œæˆ–ä½¿ç”¨ &#39;all&#39; æ¸…é™¤æ‰€æœ‰&#34; echo &#34; ç¤ºä¾‹ï¼š&#34; echo &#34; marco_clear work # æ¸…é™¤workæ ‡ç­¾&#34; echo &#34; marco_clear all # æ¸…é™¤æ‰€æœ‰æ ‡ç­¾&#34; echo &#34; å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}&#34; return 1 fi if [[ &#34;$tag&#34; == &#34;all&#34; ]]; then # å¢åŠ äºŒæ¬¡ç¡®è®¤ï¼Œè¿›ä¸€æ­¥é˜²æ­¢è¯¯æ“ä½œ read -p &#34;âš ï¸ ç¡®è®¤è¦æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•å—ï¼Ÿ(y/N) &#34; confirm if [[ &#34;$confirm&#34; =~ ^[Yy]$ ]]; then MARCO_DIRS=() _marco_save_history echo &#34;âœ“ å·²æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•&#34; else echo &#34;âœ— æ“ä½œå·²å–æ¶ˆ&#34; fi elif [[ -n &#34;${MARCO_DIRS[$tag]}&#34; ]]; then unset MARCO_DIRS[&#34;$tag&#34;] _marco_save_history echo &#34;âœ“ å·²æ¸…é™¤æ ‡ç­¾: $tag&#34; else echo &#34;âœ— æ ‡ç­¾ä¸å­˜åœ¨: $tag&#34; echo &#34; å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}&#34; fi } # 2. Tab è‡ªåŠ¨è¡¥å…¨ _polo_completion() { local cur cur=&#34;${COMP_WORDS[COMP_CWORD]}&#34; # è·å–æ‰€æœ‰çš„ key local tags=&#34;${!MARCO_DIRS[@]}&#34; # ç”Ÿæˆè¡¥å…¨åˆ—è¡¨ COMPREPLY=( $(compgen -W &#34;${tags}&#34; -- ${cur}) ) } # ç»‘å®šè¡¥å…¨å‡½æ•° complete -F _polo_completion polo complete -F _polo_completion marco_clear ç¼–å†™æ€è·¯ä¸è§£æ 1. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šå…³è”æ•°ç»„ è„šæœ¬æ ¸å¿ƒä¾èµ–äº declare -A MARCO_DIRSï¼Œè¿™æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼ˆAssociative Arrayï¼‰ï¼Œé”®æ˜¯æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œå€¼æ˜¯ç»å¯¹è·¯å¾„ã€‚è¿™æ¯”ç®€å•çš„ä¸¤ä¸ªå˜é‡æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸æˆ‘ä»¬ä¿å­˜å¤šä¸ªä½ç½®ã€‚">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-19T10:48:00+08:00">
    <meta property="article:modified_time" content="2025-01-19T10:48:00+08:00">
    <meta property="article:tag" content="Shell">
    <meta property="article:tag" content="Linux">
    <meta property="og:image" content="http://localhost:1313/shell.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/shell.png">
<meta name="twitter:title" content="Shellç»ƒä¹ 2-2">
<meta name="twitter:description" content="åœ¨æ—¥å¸¸çš„ Shell æ“ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æ·±å±‚çº§çš„ç›®å½•ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚The Missing Semester of Your CS Education 2-2 ä½œä¸šè¦æ±‚ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå®ç° marco ä¿å­˜å½“å‰ç›®å½•å’Œ polo è·³è½¬å›ä¿å­˜çš„ç›®å½•ã€‚
è„šæœ¬æºç 
å¯ä»¥ç›´æ¥ä¸‹è½½æˆ–å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° /home/vsat/marco.shï¼š
#!/bin/bash

declare -A MARCO_DIRS
MARCO_DEFAULT=&#34;default&#34;
MARCO_HISTORY_FILE=&#34;$HOME/.marco_history&#34;

# 1. æŒä¹…åŒ–åŠ è½½ï¼šå¯åŠ¨æ—¶è¯»å–å†å²è®°å½•
if [[ -f &#34;$MARCO_HISTORY_FILE&#34; ]]; then
    while IFS=: read -r tag path; do
        # ç®€å•æ ¡éªŒç›®å½•æ˜¯å¦å­˜åœ¨
        if [[ -d &#34;$path&#34; ]]; then
            MARCO_DIRS[&#34;$tag&#34;]=&#34;$path&#34;
        fi
    done &lt; &#34;$MARCO_HISTORY_FILE&#34;
fi

# å†…éƒ¨è¾…åŠ©å‡½æ•°ï¼šä¿å­˜å†å²è®°å½•åˆ°æ–‡ä»¶ï¼ˆé‡å†™æ¨¡å¼ï¼Œå®ç°æ¸…ç†ï¼‰
_marco_save_history() {
    # ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ç©ºçš„ï¼‰
    : &gt; &#34;$MARCO_HISTORY_FILE&#34;
    for tag in &#34;${!MARCO_DIRS[@]}&#34;; do
        echo &#34;$tag:${MARCO_DIRS[$tag]}&#34; &gt;&gt; &#34;$MARCO_HISTORY_FILE&#34;
    done
}

marco(){
	local tag=&#34;${1:-$MARCO_DEFAULT}&#34;
	local current_dir=&#34;$(pwd)&#34;

	MARCO_DIRS[&#34;$tag&#34;]=&#34;$current_dir&#34;

    # è°ƒç”¨ä¼˜åŒ–åçš„ä¿å­˜å‡½æ•°ï¼ˆå»é‡ã€æ¸…ç†ï¼‰
	_marco_save_history
	
	echo &#34;âœ“ Marco[$tag]: å·²ä¿å­˜ â†’ $current_dir&#34;
	echo &#34;  å¯ç”¨æ ‡ç­¾: ${!MARCO_DIRS[@]}&#34;
}

polo() {
    local tag=&#34;${1:-$MARCO_DEFAULT}&#34;  # å¦‚æœæ²¡æœ‰æŒ‡å®šæ ‡ç­¾ï¼Œä½¿ç”¨é»˜è®¤

    if [[ -z &#34;${MARCO_DIRS[$tag]}&#34; ]]; then
        echo &#34;âœ— Polo[$tag]: é”™è¯¯ï¼è¯¥æ ‡ç­¾æœªä¿å­˜ä»»ä½•ç›®å½•&#34;
        echo &#34;   å¯ç”¨çš„æ ‡ç­¾: ${!MARCO_DIRS[@]}&#34;
        return 1
    fi

    local target_dir=&#34;${MARCO_DIRS[$tag]}&#34;

    if [[ ! -d &#34;$target_dir&#34; ]]; then
        echo &#34;âœ— Polo[$tag]: é”™è¯¯ï¼ç›®å½•ä¸å­˜åœ¨: $target_dir&#34;
        # ä»æ•°ç»„ä¸­ç§»é™¤æ— æ•ˆæ¡ç›®å¹¶åŒæ­¥åˆ°æ–‡ä»¶
        unset MARCO_DIRS[&#34;$tag&#34;]
        _marco_save_history
        return 1
    fi

    if cd &#34;$target_dir&#34;; then
        echo &#34;âœ“ Polo[$tag]: å·²è·³è½¬åˆ° â†’ $(pwd)&#34;
    else
        echo &#34;âœ— Polo[$tag]: è·³è½¬å¤±è´¥ï¼æ— æƒé™è®¿é—®&#34;
        return 1
    fi
}

# æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„ç›®å½•
marco_list() {
    if [[ ${#MARCO_DIRS[@]} -eq 0 ]]; then
        echo &#34;ğŸ“Œ è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•ç›®å½•&#34;
        return
    fi

    echo &#34;ğŸ“Œ å·²ä¿å­˜çš„ç›®å½•æ ‡ç­¾:&#34;
    for tag in &#34;${!MARCO_DIRS[@]}&#34;; do
        if [[ &#34;$tag&#34; == &#34;$MARCO_DEFAULT&#34; ]]; then
            echo &#34;  â˜… $tag â†’ ${MARCO_DIRS[$tag]}&#34;
        else
            echo &#34;    $tag â†’ ${MARCO_DIRS[$tag]}&#34;
        fi
    done
}

# æ¸…é™¤æŒ‡å®šæ ‡ç­¾æˆ–æ‰€æœ‰æ ‡ç­¾
marco_clear() {
    local tag=&#34;${1}&#34;

    if [[ -z &#34;$tag&#34; ]]; then
        echo &#34;âš ï¸  ç”¨æ³•é”™è¯¯ï¼šè¯·æŒ‡å®šè¦æ¸…é™¤çš„æ ‡ç­¾ï¼Œæˆ–ä½¿ç”¨ &#39;all&#39; æ¸…é™¤æ‰€æœ‰&#34;
        echo &#34;   ç¤ºä¾‹ï¼š&#34;
        echo &#34;     marco_clear work    # æ¸…é™¤workæ ‡ç­¾&#34;
        echo &#34;     marco_clear all     # æ¸…é™¤æ‰€æœ‰æ ‡ç­¾&#34;
        echo &#34;   å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}&#34;
    	return 1
    fi

    if [[ &#34;$tag&#34; == &#34;all&#34; ]]; then
        # å¢åŠ äºŒæ¬¡ç¡®è®¤ï¼Œè¿›ä¸€æ­¥é˜²æ­¢è¯¯æ“ä½œ
        read -p &#34;âš ï¸  ç¡®è®¤è¦æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•å—ï¼Ÿ(y/N) &#34; confirm
        if [[ &#34;$confirm&#34; =~ ^[Yy]$ ]]; then
            MARCO_DIRS=()
            _marco_save_history
            echo &#34;âœ“ å·²æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•&#34;
        else
            echo &#34;âœ— æ“ä½œå·²å–æ¶ˆ&#34;
        fi
    
    elif [[ -n &#34;${MARCO_DIRS[$tag]}&#34; ]]; then
        unset MARCO_DIRS[&#34;$tag&#34;]
        _marco_save_history
        echo &#34;âœ“ å·²æ¸…é™¤æ ‡ç­¾: $tag&#34;
    else
        echo &#34;âœ— æ ‡ç­¾ä¸å­˜åœ¨: $tag&#34;
	echo &#34; å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}&#34;
    fi
}

# 2. Tab è‡ªåŠ¨è¡¥å…¨
_polo_completion() {
    local cur
    cur=&#34;${COMP_WORDS[COMP_CWORD]}&#34;
    # è·å–æ‰€æœ‰çš„ key
    local tags=&#34;${!MARCO_DIRS[@]}&#34;
    # ç”Ÿæˆè¡¥å…¨åˆ—è¡¨
    COMPREPLY=( $(compgen -W &#34;${tags}&#34; -- ${cur}) )
}

# ç»‘å®šè¡¥å…¨å‡½æ•°
complete -F _polo_completion polo
complete -F _polo_completion marco_clear
ç¼–å†™æ€è·¯ä¸è§£æ
1. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šå…³è”æ•°ç»„
è„šæœ¬æ ¸å¿ƒä¾èµ–äº declare -A MARCO_DIRSï¼Œè¿™æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼ˆAssociative Arrayï¼‰ï¼Œé”®æ˜¯æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œå€¼æ˜¯ç»å¯¹è·¯å¾„ã€‚è¿™æ¯”ç®€å•çš„ä¸¤ä¸ªå˜é‡æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸æˆ‘ä»¬ä¿å­˜å¤šä¸ªä½ç½®ã€‚">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Shellç»ƒä¹ 2-2",
      "item": "http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Shellç»ƒä¹ 2-2",
  "name": "Shellç»ƒä¹ 2-2",
  "description": "åœ¨æ—¥å¸¸çš„ Shell æ“ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æ·±å±‚çº§çš„ç›®å½•ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚The Missing Semester of Your CS Education 2-2 ä½œä¸šè¦æ±‚ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå®ç° marco ä¿å­˜å½“å‰ç›®å½•å’Œ polo è·³è½¬å›ä¿å­˜çš„ç›®å½•ã€‚\nè„šæœ¬æºç  å¯ä»¥ç›´æ¥ä¸‹è½½æˆ–å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° /home/vsat/marco.shï¼š\n#!/bin/bash declare -A MARCO_DIRS MARCO_DEFAULT=\u0026#34;default\u0026#34; MARCO_HISTORY_FILE=\u0026#34;$HOME/.marco_history\u0026#34; # 1. æŒä¹…åŒ–åŠ è½½ï¼šå¯åŠ¨æ—¶è¯»å–å†å²è®°å½• if [[ -f \u0026#34;$MARCO_HISTORY_FILE\u0026#34; ]]; then while IFS=: read -r tag path; do # ç®€å•æ ¡éªŒç›®å½•æ˜¯å¦å­˜åœ¨ if [[ -d \u0026#34;$path\u0026#34; ]]; then MARCO_DIRS[\u0026#34;$tag\u0026#34;]=\u0026#34;$path\u0026#34; fi done \u0026lt; \u0026#34;$MARCO_HISTORY_FILE\u0026#34; fi # å†…éƒ¨è¾…åŠ©å‡½æ•°ï¼šä¿å­˜å†å²è®°å½•åˆ°æ–‡ä»¶ï¼ˆé‡å†™æ¨¡å¼ï¼Œå®ç°æ¸…ç†ï¼‰ _marco_save_history() { # ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ç©ºçš„ï¼‰ : \u0026gt; \u0026#34;$MARCO_HISTORY_FILE\u0026#34; for tag in \u0026#34;${!MARCO_DIRS[@]}\u0026#34;; do echo \u0026#34;$tag:${MARCO_DIRS[$tag]}\u0026#34; \u0026gt;\u0026gt; \u0026#34;$MARCO_HISTORY_FILE\u0026#34; done } marco(){ local tag=\u0026#34;${1:-$MARCO_DEFAULT}\u0026#34; local current_dir=\u0026#34;$(pwd)\u0026#34; MARCO_DIRS[\u0026#34;$tag\u0026#34;]=\u0026#34;$current_dir\u0026#34; # è°ƒç”¨ä¼˜åŒ–åçš„ä¿å­˜å‡½æ•°ï¼ˆå»é‡ã€æ¸…ç†ï¼‰ _marco_save_history echo \u0026#34;âœ“ Marco[$tag]: å·²ä¿å­˜ â†’ $current_dir\u0026#34; echo \u0026#34; å¯ç”¨æ ‡ç­¾: ${!MARCO_DIRS[@]}\u0026#34; } polo() { local tag=\u0026#34;${1:-$MARCO_DEFAULT}\u0026#34; # å¦‚æœæ²¡æœ‰æŒ‡å®šæ ‡ç­¾ï¼Œä½¿ç”¨é»˜è®¤ if [[ -z \u0026#34;${MARCO_DIRS[$tag]}\u0026#34; ]]; then echo \u0026#34;âœ— Polo[$tag]: é”™è¯¯ï¼è¯¥æ ‡ç­¾æœªä¿å­˜ä»»ä½•ç›®å½•\u0026#34; echo \u0026#34; å¯ç”¨çš„æ ‡ç­¾: ${!MARCO_DIRS[@]}\u0026#34; return 1 fi local target_dir=\u0026#34;${MARCO_DIRS[$tag]}\u0026#34; if [[ ! -d \u0026#34;$target_dir\u0026#34; ]]; then echo \u0026#34;âœ— Polo[$tag]: é”™è¯¯ï¼ç›®å½•ä¸å­˜åœ¨: $target_dir\u0026#34; # ä»æ•°ç»„ä¸­ç§»é™¤æ— æ•ˆæ¡ç›®å¹¶åŒæ­¥åˆ°æ–‡ä»¶ unset MARCO_DIRS[\u0026#34;$tag\u0026#34;] _marco_save_history return 1 fi if cd \u0026#34;$target_dir\u0026#34;; then echo \u0026#34;âœ“ Polo[$tag]: å·²è·³è½¬åˆ° â†’ $(pwd)\u0026#34; else echo \u0026#34;âœ— Polo[$tag]: è·³è½¬å¤±è´¥ï¼æ— æƒé™è®¿é—®\u0026#34; return 1 fi } # æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„ç›®å½• marco_list() { if [[ ${#MARCO_DIRS[@]} -eq 0 ]]; then echo \u0026#34;ğŸ“Œ è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•ç›®å½•\u0026#34; return fi echo \u0026#34;ğŸ“Œ å·²ä¿å­˜çš„ç›®å½•æ ‡ç­¾:\u0026#34; for tag in \u0026#34;${!MARCO_DIRS[@]}\u0026#34;; do if [[ \u0026#34;$tag\u0026#34; == \u0026#34;$MARCO_DEFAULT\u0026#34; ]]; then echo \u0026#34; â˜… $tag â†’ ${MARCO_DIRS[$tag]}\u0026#34; else echo \u0026#34; $tag â†’ ${MARCO_DIRS[$tag]}\u0026#34; fi done } # æ¸…é™¤æŒ‡å®šæ ‡ç­¾æˆ–æ‰€æœ‰æ ‡ç­¾ marco_clear() { local tag=\u0026#34;${1}\u0026#34; if [[ -z \u0026#34;$tag\u0026#34; ]]; then echo \u0026#34;âš ï¸ ç”¨æ³•é”™è¯¯ï¼šè¯·æŒ‡å®šè¦æ¸…é™¤çš„æ ‡ç­¾ï¼Œæˆ–ä½¿ç”¨ \u0026#39;all\u0026#39; æ¸…é™¤æ‰€æœ‰\u0026#34; echo \u0026#34; ç¤ºä¾‹ï¼š\u0026#34; echo \u0026#34; marco_clear work # æ¸…é™¤workæ ‡ç­¾\u0026#34; echo \u0026#34; marco_clear all # æ¸…é™¤æ‰€æœ‰æ ‡ç­¾\u0026#34; echo \u0026#34; å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}\u0026#34; return 1 fi if [[ \u0026#34;$tag\u0026#34; == \u0026#34;all\u0026#34; ]]; then # å¢åŠ äºŒæ¬¡ç¡®è®¤ï¼Œè¿›ä¸€æ­¥é˜²æ­¢è¯¯æ“ä½œ read -p \u0026#34;âš ï¸ ç¡®è®¤è¦æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•å—ï¼Ÿ(y/N) \u0026#34; confirm if [[ \u0026#34;$confirm\u0026#34; =~ ^[Yy]$ ]]; then MARCO_DIRS=() _marco_save_history echo \u0026#34;âœ“ å·²æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•\u0026#34; else echo \u0026#34;âœ— æ“ä½œå·²å–æ¶ˆ\u0026#34; fi elif [[ -n \u0026#34;${MARCO_DIRS[$tag]}\u0026#34; ]]; then unset MARCO_DIRS[\u0026#34;$tag\u0026#34;] _marco_save_history echo \u0026#34;âœ“ å·²æ¸…é™¤æ ‡ç­¾: $tag\u0026#34; else echo \u0026#34;âœ— æ ‡ç­¾ä¸å­˜åœ¨: $tag\u0026#34; echo \u0026#34; å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}\u0026#34; fi } # 2. Tab è‡ªåŠ¨è¡¥å…¨ _polo_completion() { local cur cur=\u0026#34;${COMP_WORDS[COMP_CWORD]}\u0026#34; # è·å–æ‰€æœ‰çš„ key local tags=\u0026#34;${!MARCO_DIRS[@]}\u0026#34; # ç”Ÿæˆè¡¥å…¨åˆ—è¡¨ COMPREPLY=( $(compgen -W \u0026#34;${tags}\u0026#34; -- ${cur}) ) } # ç»‘å®šè¡¥å…¨å‡½æ•° complete -F _polo_completion polo complete -F _polo_completion marco_clear ç¼–å†™æ€è·¯ä¸è§£æ 1. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šå…³è”æ•°ç»„ è„šæœ¬æ ¸å¿ƒä¾èµ–äº declare -A MARCO_DIRSï¼Œè¿™æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼ˆAssociative Arrayï¼‰ï¼Œé”®æ˜¯æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œå€¼æ˜¯ç»å¯¹è·¯å¾„ã€‚è¿™æ¯”ç®€å•çš„ä¸¤ä¸ªå˜é‡æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸æˆ‘ä»¬ä¿å­˜å¤šä¸ªä½ç½®ã€‚\n",
  "keywords": [
    "Shell", "Linux"
  ],
  "articleBody": "åœ¨æ—¥å¸¸çš„ Shell æ“ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æ·±å±‚çº§çš„ç›®å½•ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚The Missing Semester of Your CS Education 2-2 ä½œä¸šè¦æ±‚ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå®ç° marco ä¿å­˜å½“å‰ç›®å½•å’Œ polo è·³è½¬å›ä¿å­˜çš„ç›®å½•ã€‚\nè„šæœ¬æºç  å¯ä»¥ç›´æ¥ä¸‹è½½æˆ–å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° /home/vsat/marco.shï¼š\n#!/bin/bash declare -A MARCO_DIRS MARCO_DEFAULT=\"default\" MARCO_HISTORY_FILE=\"$HOME/.marco_history\" # 1. æŒä¹…åŒ–åŠ è½½ï¼šå¯åŠ¨æ—¶è¯»å–å†å²è®°å½• if [[ -f \"$MARCO_HISTORY_FILE\" ]]; then while IFS=: read -r tag path; do # ç®€å•æ ¡éªŒç›®å½•æ˜¯å¦å­˜åœ¨ if [[ -d \"$path\" ]]; then MARCO_DIRS[\"$tag\"]=\"$path\" fi done \u003c \"$MARCO_HISTORY_FILE\" fi # å†…éƒ¨è¾…åŠ©å‡½æ•°ï¼šä¿å­˜å†å²è®°å½•åˆ°æ–‡ä»¶ï¼ˆé‡å†™æ¨¡å¼ï¼Œå®ç°æ¸…ç†ï¼‰ _marco_save_history() { # ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ç©ºçš„ï¼‰ : \u003e \"$MARCO_HISTORY_FILE\" for tag in \"${!MARCO_DIRS[@]}\"; do echo \"$tag:${MARCO_DIRS[$tag]}\" \u003e\u003e \"$MARCO_HISTORY_FILE\" done } marco(){ local tag=\"${1:-$MARCO_DEFAULT}\" local current_dir=\"$(pwd)\" MARCO_DIRS[\"$tag\"]=\"$current_dir\" # è°ƒç”¨ä¼˜åŒ–åçš„ä¿å­˜å‡½æ•°ï¼ˆå»é‡ã€æ¸…ç†ï¼‰ _marco_save_history echo \"âœ“ Marco[$tag]: å·²ä¿å­˜ â†’ $current_dir\" echo \" å¯ç”¨æ ‡ç­¾: ${!MARCO_DIRS[@]}\" } polo() { local tag=\"${1:-$MARCO_DEFAULT}\" # å¦‚æœæ²¡æœ‰æŒ‡å®šæ ‡ç­¾ï¼Œä½¿ç”¨é»˜è®¤ if [[ -z \"${MARCO_DIRS[$tag]}\" ]]; then echo \"âœ— Polo[$tag]: é”™è¯¯ï¼è¯¥æ ‡ç­¾æœªä¿å­˜ä»»ä½•ç›®å½•\" echo \" å¯ç”¨çš„æ ‡ç­¾: ${!MARCO_DIRS[@]}\" return 1 fi local target_dir=\"${MARCO_DIRS[$tag]}\" if [[ ! -d \"$target_dir\" ]]; then echo \"âœ— Polo[$tag]: é”™è¯¯ï¼ç›®å½•ä¸å­˜åœ¨: $target_dir\" # ä»æ•°ç»„ä¸­ç§»é™¤æ— æ•ˆæ¡ç›®å¹¶åŒæ­¥åˆ°æ–‡ä»¶ unset MARCO_DIRS[\"$tag\"] _marco_save_history return 1 fi if cd \"$target_dir\"; then echo \"âœ“ Polo[$tag]: å·²è·³è½¬åˆ° â†’ $(pwd)\" else echo \"âœ— Polo[$tag]: è·³è½¬å¤±è´¥ï¼æ— æƒé™è®¿é—®\" return 1 fi } # æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„ç›®å½• marco_list() { if [[ ${#MARCO_DIRS[@]} -eq 0 ]]; then echo \"ğŸ“Œ è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•ç›®å½•\" return fi echo \"ğŸ“Œ å·²ä¿å­˜çš„ç›®å½•æ ‡ç­¾:\" for tag in \"${!MARCO_DIRS[@]}\"; do if [[ \"$tag\" == \"$MARCO_DEFAULT\" ]]; then echo \" â˜… $tag â†’ ${MARCO_DIRS[$tag]}\" else echo \" $tag â†’ ${MARCO_DIRS[$tag]}\" fi done } # æ¸…é™¤æŒ‡å®šæ ‡ç­¾æˆ–æ‰€æœ‰æ ‡ç­¾ marco_clear() { local tag=\"${1}\" if [[ -z \"$tag\" ]]; then echo \"âš ï¸ ç”¨æ³•é”™è¯¯ï¼šè¯·æŒ‡å®šè¦æ¸…é™¤çš„æ ‡ç­¾ï¼Œæˆ–ä½¿ç”¨ 'all' æ¸…é™¤æ‰€æœ‰\" echo \" ç¤ºä¾‹ï¼š\" echo \" marco_clear work # æ¸…é™¤workæ ‡ç­¾\" echo \" marco_clear all # æ¸…é™¤æ‰€æœ‰æ ‡ç­¾\" echo \" å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}\" return 1 fi if [[ \"$tag\" == \"all\" ]]; then # å¢åŠ äºŒæ¬¡ç¡®è®¤ï¼Œè¿›ä¸€æ­¥é˜²æ­¢è¯¯æ“ä½œ read -p \"âš ï¸ ç¡®è®¤è¦æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•å—ï¼Ÿ(y/N) \" confirm if [[ \"$confirm\" =~ ^[Yy]$ ]]; then MARCO_DIRS=() _marco_save_history echo \"âœ“ å·²æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•\" else echo \"âœ— æ“ä½œå·²å–æ¶ˆ\" fi elif [[ -n \"${MARCO_DIRS[$tag]}\" ]]; then unset MARCO_DIRS[\"$tag\"] _marco_save_history echo \"âœ“ å·²æ¸…é™¤æ ‡ç­¾: $tag\" else echo \"âœ— æ ‡ç­¾ä¸å­˜åœ¨: $tag\" echo \" å½“å‰å¯ç”¨æ ‡ç­¾ï¼š${!MARCO_DIRS[@]}\" fi } # 2. Tab è‡ªåŠ¨è¡¥å…¨ _polo_completion() { local cur cur=\"${COMP_WORDS[COMP_CWORD]}\" # è·å–æ‰€æœ‰çš„ key local tags=\"${!MARCO_DIRS[@]}\" # ç”Ÿæˆè¡¥å…¨åˆ—è¡¨ COMPREPLY=( $(compgen -W \"${tags}\" -- ${cur}) ) } # ç»‘å®šè¡¥å…¨å‡½æ•° complete -F _polo_completion polo complete -F _polo_completion marco_clear ç¼–å†™æ€è·¯ä¸è§£æ 1. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šå…³è”æ•°ç»„ è„šæœ¬æ ¸å¿ƒä¾èµ–äº declare -A MARCO_DIRSï¼Œè¿™æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼ˆAssociative Arrayï¼‰ï¼Œé”®æ˜¯æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œå€¼æ˜¯ç»å¯¹è·¯å¾„ã€‚è¿™æ¯”ç®€å•çš„ä¸¤ä¸ªå˜é‡æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸æˆ‘ä»¬ä¿å­˜å¤šä¸ªä½ç½®ã€‚\n2. æŒä¹…åŒ–å­˜å‚¨ é—®é¢˜ï¼šæ™®é€šçš„å˜é‡åœ¨ Shell å…³é—­åå°±ä¼šæ¶ˆå¤±ã€‚ è§£å†³ï¼š\nä¿å­˜ï¼šå®šä¹‰äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•° _marco_save_historyã€‚æ¯å½“ marco æˆ– marco_clear æ”¹å˜äº†å†…å­˜ä¸­çš„æ•°ç»„æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¼šå°†æ•´ä¸ªæ•°ç»„é‡å†™åˆ° ~/.marco_history æ–‡ä»¶ä¸­ã€‚é‡å†™ï¼ˆ\u003eï¼‰æ¯”è¿½åŠ ï¼ˆ\u003e\u003eï¼‰æ›´å¹²å‡€ï¼Œèƒ½è‡ªåŠ¨æ¸…ç†æ‰è¢«åˆ é™¤çš„æ ‡ç­¾ï¼Œé˜²æ­¢æ— é™å¢é•¿ã€‚ åŠ è½½ï¼šè„šæœ¬å¼€å¤´æœ‰ä¸€æ®µä»£ç æ£€æŸ¥å†å²æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œä½¿ç”¨ while read å¾ªç¯è§£ææ¯ä¸€è¡Œ tag:pathï¼Œå¹¶æ¢å¤åˆ° MARCO_DIRS æ•°ç»„ä¸­ã€‚ 3. è¡¥å…¨ ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè„šæœ¬ä½¿ç”¨äº† Bash çš„ complete å†…ç½®å‘½ä»¤ã€‚\n_polo_completion å‡½æ•°åˆ©ç”¨ compgen -W æ ¹æ®å½“å‰çš„ MARCO_DIRS é”®ç”Ÿæˆå€™é€‰è¯åˆ—è¡¨ã€‚ complete -F _polo_completion polo å°†è¿™ä¸ªè¡¥å…¨é€»è¾‘ç»‘å®šåˆ°äº† polo å‘½ä»¤ã€‚ æ•ˆæœï¼šè¾“å…¥ polo w ç„¶åæŒ‰ä¸‹ Tab é”®ï¼ŒShell ä¼šè‡ªåŠ¨è¡¥å…¨ä¸º polo workã€‚ 4. å¥å£®æ€§ä¸å®‰å…¨ ç›®å½•æ£€æŸ¥ï¼šåœ¨è·³è½¬å‰æ£€æŸ¥ -d \"$target_dir\"ã€‚å¦‚æœç›®å½•è¢«åˆ é™¤äº†ï¼Œè„šæœ¬ä¸ä»…æŠ¥é”™ï¼Œè¿˜ä¼šè‡ªåŠ¨æ¸…ç†æ‰æ— æ•ˆçš„è®°å½•ã€‚ å±é™©æ“ä½œç¡®è®¤ï¼šmarco_clear all ä¼šæ¸…ç©ºæ‰€æœ‰è®°å½•ï¼Œå› æ­¤å¢åŠ äº†ä¸€ä¸ª read -pè¿›è¡ŒäºŒæ¬¡ç¡®è®¤ï¼Œé˜²æ­¢æ‰‹è¯¯ã€‚ å¦‚ä½•ä½¿ç”¨ é‡è¦ï¼š å› ä¸ºè„šæœ¬éœ€è¦ä¿®æ”¹å½“å‰ Shell çš„ç¯å¢ƒå˜é‡ï¼ˆåˆ‡æ¢ç›®å½• cdï¼‰ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ source æˆ– . æ¥åŠ è½½å®ƒï¼Œè€Œä¸èƒ½ç›´æ¥è¿è¡Œã€‚\n1. åŠ è½½è„šæœ¬ å¯ä»¥åœ¨ .bashrc æˆ– .zshrc ä¸­æ·»åŠ ï¼š\nsource /home/vsat/marco.sh æˆ–è€…ä¸´æ—¶åŠ è½½ï¼š\nsource ./marco.sh 2. åŸºæœ¬ç”¨æ³• # ä¿å­˜ç›®å½• cd /var/log/nginx marco log # ä¿å­˜å½“å‰ç›®å½•ä¸º log æ ‡ç­¾ cd ~/projects/backend marco proj # ä¿å­˜å½“å‰ç›®å½•ä¸º proj æ ‡ç­¾ # è·³è½¬ cd /tmp polo log # è‡ªåŠ¨è·³è½¬å› /var/log/nginx # Tips: æ­¤æ—¶è¾“å…¥ polo p ä¼šè‡ªåŠ¨è¡¥å…¨ä¸º proj polo proj 3. ç®¡ç†è®°å½• marco_list # æŸ¥çœ‹æ‰€æœ‰å·²ä¿å­˜çš„æ ‡ç­¾ marco_clear log # åˆ é™¤ log æ ‡ç­¾ marco_clear all # æ¸…ç©ºæ‰€æœ‰è®°å½• ",
  "wordCount" : "475",
  "inLanguage": "en",
  "image":"http://localhost:1313/shell.png","datePublished": "2025-01-19T10:48:00+08:00",
  "dateModified": "2025-01-19T10:48:00+08:00",
  "author":{
    "@type": "Person",
    "name": "xlikai"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "xlikaiçš„åšå®¢",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.jpg"
    }
  }
}
</script>
</head>

        <body id="top">
            <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Xlikai Home (Alt + H)">Xlikai Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>

        <div class="home-search">
            <form action="http://localhost:1313/search" method="get">
                <input type="text" name="q" placeholder="æœç´¢ç¬”è®°..." required>
                <button type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </button>
            </form>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts" title="å­¦ä¹ ç¬”è®°">
                    <span>å­¦ä¹ ç¬”è®°</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/link" title="é¡¹ç›®è®°å½•">
                    <span>é¡¹ç›®è®°å½•</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/monthly" title="æ¯æœˆè®°å½•">
                    <span>æ¯æœˆè®°å½•</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title=" å…³äº ">
                    <span> å…³äº </span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Shellç»ƒä¹ 2-2
    </h1>
    <div class="post-meta"><span title='2025-01-19 10:48:00 +0800 CST'>January 19, 2025</span>&nbsp;Â·&nbsp;<span>xlikai</span>

</div>
  </header> 
<figure class="entry-cover">
            <img loading="eager"
                srcset='http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/shell_hu_d1762b4139392e16.png 360w,http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/shell.png 371w'
                src="http://localhost:1313/posts/linux/shell/shell%E8%84%9A%E6%9C%AC%E4%BD%9C%E4%B8%9A2-2-copy/shell.png"
                sizes="(min-width: 768px) 720px, 100vw"
                width="371" height="157"
                alt="">
        
</figure>
  <div class="post-content"><p>åœ¨æ—¥å¸¸çš„ Shell æ“ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨æ·±å±‚çº§çš„ç›®å½•ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚The Missing Semester of Your CS Education 2-2 ä½œä¸šè¦æ±‚ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œå®ç° <code>marco</code> ä¿å­˜å½“å‰ç›®å½•å’Œ <code>polo</code> è·³è½¬å›ä¿å­˜çš„ç›®å½•ã€‚</p>
<h2 id="è„šæœ¬æºç ">è„šæœ¬æºç <a hidden class="anchor" aria-hidden="true" href="#è„šæœ¬æºç ">#</a></h2>
<p>å¯ä»¥ç›´æ¥ä¸‹è½½æˆ–å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° <code>/home/vsat/marco.sh</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>declare -A MARCO_DIRS
</span></span><span style="display:flex;"><span>MARCO_DEFAULT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;default&#34;</span>
</span></span><span style="display:flex;"><span>MARCO_HISTORY_FILE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.marco_history&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1. æŒä¹…åŒ–åŠ è½½ï¼šå¯åŠ¨æ—¶è¯»å–å†å²è®°å½•</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> -f <span style="color:#e6db74">&#34;</span>$MARCO_HISTORY_FILE<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> IFS<span style="color:#f92672">=</span>: read -r tag path; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># ç®€å•æ ¡éªŒç›®å½•æ˜¯å¦å­˜åœ¨</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> -d <span style="color:#e6db74">&#34;</span>$path<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>            MARCO_DIRS<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">&#34;</span><span style="color:#f92672">]=</span><span style="color:#e6db74">&#34;</span>$path<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">done</span> &lt; <span style="color:#e6db74">&#34;</span>$MARCO_HISTORY_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å†…éƒ¨è¾…åŠ©å‡½æ•°ï¼šä¿å­˜å†å²è®°å½•åˆ°æ–‡ä»¶ï¼ˆé‡å†™æ¨¡å¼ï¼Œå®ç°æ¸…ç†ï¼‰</span>
</span></span><span style="display:flex;"><span>_marco_save_history<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ç©ºçš„ï¼‰</span>
</span></span><span style="display:flex;"><span>    : &gt; <span style="color:#e6db74">&#34;</span>$MARCO_HISTORY_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> tag in <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>!MARCO_DIRS[@]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">:</span><span style="color:#e6db74">${</span>MARCO_DIRS[$tag]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> &gt;&gt; <span style="color:#e6db74">&#34;</span>$MARCO_HISTORY_FILE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>marco<span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>	local tag<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>1<span style="color:#66d9ef">:-</span>$MARCO_DEFAULT<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>	local current_dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	MARCO_DIRS<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">&#34;</span><span style="color:#f92672">]=</span><span style="color:#e6db74">&#34;</span>$current_dir<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># è°ƒç”¨ä¼˜åŒ–åçš„ä¿å­˜å‡½æ•°ï¼ˆå»é‡ã€æ¸…ç†ï¼‰</span>
</span></span><span style="display:flex;"><span>	_marco_save_history
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	echo <span style="color:#e6db74">&#34;âœ“ Marco[</span>$tag<span style="color:#e6db74">]: å·²ä¿å­˜ â†’ </span>$current_dir<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>	echo <span style="color:#e6db74">&#34;  å¯ç”¨æ ‡ç­¾: </span><span style="color:#e6db74">${</span>!MARCO_DIRS[@]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>polo<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    local tag<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>1<span style="color:#66d9ef">:-</span>$MARCO_DEFAULT<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>  <span style="color:#75715e"># å¦‚æœæ²¡æœ‰æŒ‡å®šæ ‡ç­¾ï¼Œä½¿ç”¨é»˜è®¤</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> -z <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>MARCO_DIRS[$tag]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;âœ— Polo[</span>$tag<span style="color:#e6db74">]: é”™è¯¯ï¼è¯¥æ ‡ç­¾æœªä¿å­˜ä»»ä½•ç›®å½•&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;   å¯ç”¨çš„æ ‡ç­¾: </span><span style="color:#e6db74">${</span>!MARCO_DIRS[@]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    local target_dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>MARCO_DIRS[$tag]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> ! -d <span style="color:#e6db74">&#34;</span>$target_dir<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;âœ— Polo[</span>$tag<span style="color:#e6db74">]: é”™è¯¯ï¼ç›®å½•ä¸å­˜åœ¨: </span>$target_dir<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># ä»æ•°ç»„ä¸­ç§»é™¤æ— æ•ˆæ¡ç›®å¹¶åŒæ­¥åˆ°æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>        unset MARCO_DIRS<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        _marco_save_history
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> cd <span style="color:#e6db74">&#34;</span>$target_dir<span style="color:#e6db74">&#34;</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;âœ“ Polo[</span>$tag<span style="color:#e6db74">]: å·²è·³è½¬åˆ° â†’ </span><span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;âœ— Polo[</span>$tag<span style="color:#e6db74">]: è·³è½¬å¤±è´¥ï¼æ— æƒé™è®¿é—®&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„ç›®å½•</span>
</span></span><span style="display:flex;"><span>marco_list<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">${#</span>MARCO_DIRS[@]<span style="color:#e6db74">}</span> -eq <span style="color:#ae81ff">0</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;ğŸ“Œ è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•ç›®å½•&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;ğŸ“Œ å·²ä¿å­˜çš„ç›®å½•æ ‡ç­¾:&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> tag in <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>!MARCO_DIRS[@]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;</span>$MARCO_DEFAULT<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>            echo <span style="color:#e6db74">&#34;  â˜… </span>$tag<span style="color:#e6db74"> â†’ </span><span style="color:#e6db74">${</span>MARCO_DIRS[$tag]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>            echo <span style="color:#e6db74">&#34;    </span>$tag<span style="color:#e6db74"> â†’ </span><span style="color:#e6db74">${</span>MARCO_DIRS[$tag]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ¸…é™¤æŒ‡å®šæ ‡ç­¾æˆ–æ‰€æœ‰æ ‡ç­¾</span>
</span></span><span style="display:flex;"><span>marco_clear<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    local tag<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>1<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> -z <span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;âš ï¸  ç”¨æ³•é”™è¯¯ï¼šè¯·æŒ‡å®šè¦æ¸…é™¤çš„æ ‡ç­¾ï¼Œæˆ–ä½¿ç”¨ &#39;all&#39; æ¸…é™¤æ‰€æœ‰&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;   ç¤ºä¾‹ï¼š&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;     marco_clear work    # æ¸…é™¤workæ ‡ç­¾&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;     marco_clear all     # æ¸…é™¤æ‰€æœ‰æ ‡ç­¾&#34;</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;   å½“å‰å¯ç”¨æ ‡ç­¾ï¼š</span><span style="color:#e6db74">${</span>!MARCO_DIRS[@]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;all&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># å¢åŠ äºŒæ¬¡ç¡®è®¤ï¼Œè¿›ä¸€æ­¥é˜²æ­¢è¯¯æ“ä½œ</span>
</span></span><span style="display:flex;"><span>        read -p <span style="color:#e6db74">&#34;âš ï¸  ç¡®è®¤è¦æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•å—ï¼Ÿ(y/N) &#34;</span> confirm
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">[[</span> <span style="color:#e6db74">&#34;</span>$confirm<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span>~ ^<span style="color:#f92672">[</span>Yy<span style="color:#f92672">]</span>$ <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>            MARCO_DIRS<span style="color:#f92672">=()</span>
</span></span><span style="display:flex;"><span>            _marco_save_history
</span></span><span style="display:flex;"><span>            echo <span style="color:#e6db74">&#34;âœ“ å·²æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç›®å½•&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>            echo <span style="color:#e6db74">&#34;âœ— æ“ä½œå·²å–æ¶ˆ&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> <span style="color:#f92672">[[</span> -n <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>MARCO_DIRS[$tag]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        unset MARCO_DIRS<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;</span>$tag<span style="color:#e6db74">&#34;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        _marco_save_history
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;âœ“ å·²æ¸…é™¤æ ‡ç­¾: </span>$tag<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;âœ— æ ‡ç­¾ä¸å­˜åœ¨: </span>$tag<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>	echo <span style="color:#e6db74">&#34; å½“å‰å¯ç”¨æ ‡ç­¾ï¼š</span><span style="color:#e6db74">${</span>!MARCO_DIRS[@]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. Tab è‡ªåŠ¨è¡¥å…¨</span>
</span></span><span style="display:flex;"><span>_polo_completion<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    local cur
</span></span><span style="display:flex;"><span>    cur<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>COMP_WORDS[COMP_CWORD]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># è·å–æ‰€æœ‰çš„ key</span>
</span></span><span style="display:flex;"><span>    local tags<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>!MARCO_DIRS[@]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># ç”Ÿæˆè¡¥å…¨åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>    COMPREPLY<span style="color:#f92672">=(</span> <span style="color:#66d9ef">$(</span>compgen -W <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>tags<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> -- <span style="color:#e6db74">${</span>cur<span style="color:#e6db74">}</span><span style="color:#66d9ef">)</span> <span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç»‘å®šè¡¥å…¨å‡½æ•°</span>
</span></span><span style="display:flex;"><span>complete -F _polo_completion polo
</span></span><span style="display:flex;"><span>complete -F _polo_completion marco_clear
</span></span></code></pre></div><h2 id="ç¼–å†™æ€è·¯ä¸è§£æ">ç¼–å†™æ€è·¯ä¸è§£æ<a hidden class="anchor" aria-hidden="true" href="#ç¼–å†™æ€è·¯ä¸è§£æ">#</a></h2>
<h3 id="1-æ ¸å¿ƒæ•°æ®ç»“æ„å…³è”æ•°ç»„">1. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šå…³è”æ•°ç»„<a hidden class="anchor" aria-hidden="true" href="#1-æ ¸å¿ƒæ•°æ®ç»“æ„å…³è”æ•°ç»„">#</a></h3>
<p>è„šæœ¬æ ¸å¿ƒä¾èµ–äº <code>declare -A MARCO_DIRS</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼ˆAssociative Arrayï¼‰ï¼Œé”®æ˜¯æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œå€¼æ˜¯ç»å¯¹è·¯å¾„ã€‚è¿™æ¯”ç®€å•çš„ä¸¤ä¸ªå˜é‡æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå…è®¸æˆ‘ä»¬ä¿å­˜å¤šä¸ªä½ç½®ã€‚</p>
<h3 id="2-æŒä¹…åŒ–å­˜å‚¨">2. æŒä¹…åŒ–å­˜å‚¨<a hidden class="anchor" aria-hidden="true" href="#2-æŒä¹…åŒ–å­˜å‚¨">#</a></h3>
<p><strong>é—®é¢˜</strong>ï¼šæ™®é€šçš„å˜é‡åœ¨ Shell å…³é—­åå°±ä¼šæ¶ˆå¤±ã€‚
<strong>è§£å†³</strong>ï¼š</p>
<ul>
<li><strong>ä¿å­˜</strong>ï¼šå®šä¹‰äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•° <code>_marco_save_history</code>ã€‚æ¯å½“ <code>marco</code> æˆ– <code>marco_clear</code> æ”¹å˜äº†å†…å­˜ä¸­çš„æ•°ç»„æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¼šå°†æ•´ä¸ªæ•°ç»„<strong>é‡å†™</strong>åˆ° <code>~/.marco_history</code> æ–‡ä»¶ä¸­ã€‚é‡å†™ï¼ˆ<code>&gt;</code>ï¼‰æ¯”è¿½åŠ ï¼ˆ<code>&gt;&gt;</code>ï¼‰æ›´å¹²å‡€ï¼Œèƒ½è‡ªåŠ¨æ¸…ç†æ‰è¢«åˆ é™¤çš„æ ‡ç­¾ï¼Œé˜²æ­¢æ— é™å¢é•¿ã€‚</li>
<li><strong>åŠ è½½</strong>ï¼šè„šæœ¬å¼€å¤´æœ‰ä¸€æ®µä»£ç æ£€æŸ¥å†å²æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œä½¿ç”¨ <code>while read</code> å¾ªç¯è§£ææ¯ä¸€è¡Œ <code>tag:path</code>ï¼Œå¹¶æ¢å¤åˆ° <code>MARCO_DIRS</code> æ•°ç»„ä¸­ã€‚</li>
</ul>
<h3 id="3-è¡¥å…¨">3. è¡¥å…¨<a hidden class="anchor" aria-hidden="true" href="#3-è¡¥å…¨">#</a></h3>
<p>ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè„šæœ¬ä½¿ç”¨äº† Bash çš„ <code>complete</code> å†…ç½®å‘½ä»¤ã€‚</p>
<ul>
<li><code>_polo_completion</code> å‡½æ•°åˆ©ç”¨ <code>compgen -W</code> æ ¹æ®å½“å‰çš„ <code>MARCO_DIRS</code> é”®ç”Ÿæˆå€™é€‰è¯åˆ—è¡¨ã€‚</li>
<li><code>complete -F _polo_completion polo</code> å°†è¿™ä¸ªè¡¥å…¨é€»è¾‘ç»‘å®šåˆ°äº† <code>polo</code> å‘½ä»¤ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šè¾“å…¥ <code>polo w</code> ç„¶åæŒ‰ä¸‹ Tab é”®ï¼ŒShell ä¼šè‡ªåŠ¨è¡¥å…¨ä¸º <code>polo work</code>ã€‚</li>
</ul>
<h3 id="4-å¥å£®æ€§ä¸å®‰å…¨">4. å¥å£®æ€§ä¸å®‰å…¨<a hidden class="anchor" aria-hidden="true" href="#4-å¥å£®æ€§ä¸å®‰å…¨">#</a></h3>
<ul>
<li><strong>ç›®å½•æ£€æŸ¥</strong>ï¼šåœ¨è·³è½¬å‰æ£€æŸ¥ <code>-d &quot;$target_dir&quot;</code>ã€‚å¦‚æœç›®å½•è¢«åˆ é™¤äº†ï¼Œè„šæœ¬ä¸ä»…æŠ¥é”™ï¼Œè¿˜ä¼šè‡ªåŠ¨æ¸…ç†æ‰æ— æ•ˆçš„è®°å½•ã€‚</li>
<li><strong>å±é™©æ“ä½œç¡®è®¤</strong>ï¼š<code>marco_clear all</code> ä¼šæ¸…ç©ºæ‰€æœ‰è®°å½•ï¼Œå› æ­¤å¢åŠ äº†ä¸€ä¸ª <code>read -p</code>è¿›è¡ŒäºŒæ¬¡ç¡®è®¤ï¼Œé˜²æ­¢æ‰‹è¯¯ã€‚</li>
</ul>
<h2 id="å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#å¦‚ä½•ä½¿ç”¨">#</a></h2>
<p><strong>é‡è¦ï¼š</strong> å› ä¸ºè„šæœ¬éœ€è¦ä¿®æ”¹å½“å‰ Shell çš„ç¯å¢ƒå˜é‡ï¼ˆåˆ‡æ¢ç›®å½• <code>cd</code>ï¼‰ï¼Œæ‰€ä»¥<strong>å¿…é¡»</strong>ä½¿ç”¨ <code>source</code> æˆ– <code>.</code> æ¥åŠ è½½å®ƒï¼Œè€Œä¸èƒ½ç›´æ¥è¿è¡Œã€‚</p>
<h3 id="1-åŠ è½½è„šæœ¬">1. åŠ è½½è„šæœ¬<a hidden class="anchor" aria-hidden="true" href="#1-åŠ è½½è„šæœ¬">#</a></h3>
<p>å¯ä»¥åœ¨ <code>.bashrc</code> æˆ– <code>.zshrc</code> ä¸­æ·»åŠ ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source /home/vsat/marco.sh
</span></span></code></pre></div><p>æˆ–è€…ä¸´æ—¶åŠ è½½ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>source ./marco.sh
</span></span></code></pre></div><h3 id="2-åŸºæœ¬ç”¨æ³•">2. åŸºæœ¬ç”¨æ³•<a hidden class="anchor" aria-hidden="true" href="#2-åŸºæœ¬ç”¨æ³•">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ä¿å­˜ç›®å½•</span>
</span></span><span style="display:flex;"><span>cd /var/log/nginx
</span></span><span style="display:flex;"><span>marco log      <span style="color:#75715e"># ä¿å­˜å½“å‰ç›®å½•ä¸º log æ ‡ç­¾</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cd ~/projects/backend
</span></span><span style="display:flex;"><span>marco proj     <span style="color:#75715e"># ä¿å­˜å½“å‰ç›®å½•ä¸º proj æ ‡ç­¾</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·³è½¬</span>
</span></span><span style="display:flex;"><span>cd /tmp
</span></span><span style="display:flex;"><span>polo log       <span style="color:#75715e"># è‡ªåŠ¨è·³è½¬å› /var/log/nginx</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Tips: æ­¤æ—¶è¾“å…¥ polo p&lt;Tab&gt; ä¼šè‡ªåŠ¨è¡¥å…¨ä¸º proj</span>
</span></span><span style="display:flex;"><span>polo proj
</span></span></code></pre></div><h3 id="3-ç®¡ç†è®°å½•">3. ç®¡ç†è®°å½•<a hidden class="anchor" aria-hidden="true" href="#3-ç®¡ç†è®°å½•">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>marco_list     <span style="color:#75715e"># æŸ¥çœ‹æ‰€æœ‰å·²ä¿å­˜çš„æ ‡ç­¾</span>
</span></span><span style="display:flex;"><span>marco_clear log <span style="color:#75715e"># åˆ é™¤ log æ ‡ç­¾</span>
</span></span><span style="display:flex;"><span>marco_clear all <span style="color:#75715e"># æ¸…ç©ºæ‰€æœ‰è®°å½•</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/shell/">Shell</a></li>
      <li><a href="http://localhost:1313/tags/linux/">Linux</a></li>
    </ul>
  </footer>
</article>
            </main>
            
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/">xlikaiçš„åšå®¢</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script src="http://localhost:1313/%20js/adaptive-bg.js"></script>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<button id="top-link" aria-label="go to top" title="Go to Top (Alt + G)">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</button>

<style>
    #top-link {
        display: none;
        position: fixed;
        bottom: 25px;
        right: 25px;
        z-index: 99999;
        cursor: pointer;
        animation: fadeIn 0.5s;
        background: var(--tertiary);
        color: var(--theme);
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transition: transform 0.2s, background-color 0.3s;
    }

    #top-link:hover {
        transform: scale(1.1);
        background: var(--primary);
    }

    #top-link svg {
        width: 14px;
        height: 14px;
        fill: currentColor;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<script>
    window.addEventListener('load', function () {
        
        const mainContent = document.querySelector('.main-content');
        const myButton = document.getElementById("top-link");

        if (!myButton) return;

        
        function checkScroll(scrollTop) {
            if (scrollTop > 400) {
                myButton.style.display = "flex";
            } else {
                myButton.style.display = "none";
            }
        }

        if (mainContent) {
            
            
            mainContent.onscroll = function () {
                checkScroll(mainContent.scrollTop);
            };

            myButton.onclick = function () {
                mainContent.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            };
        });
</script></body>

</html>